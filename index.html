<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•ˆì‚° ë§›ì§‘ ì§€ë„</title>

    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: "Noto Sans KR", sans-serif;
            height: 100vh;
            background: #f5f7fb;
        }

        /* ì²˜ìŒ í™”ë©´ */
        #category-screen {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 32px 20px;
        }
        #category-screen h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }
        #category-screen p {
            margin-bottom: 24px;
            color: #666;
            font-size: 14px;
        }

        .card-grid {
            width: 100%;
            max-width: 760px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }

        .category-card {
            border: none;
            border-radius: 18px;
            padding: 18px 14px;
            background: white;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 6px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.06);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            text-align: left;
        }
        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 24px rgba(0,0,0,0.1);
            background: #f7fbff;
        }
        .emoji { font-size: 28px; }
        .title { font-size: 17px; font-weight: 600; }
        .desc { font-size: 12px; color: #777; }

        /* ì§€ë„ í™”ë©´ */
        #map-screen { display: none; height: 100vh; }
        #map-container { display: flex; height: 100%; }
        #map { flex: 3; }

        #info-panel {
            flex: 1;
            padding: 20px;
            border-left: 2px solid #e1e4ea;
            background: white;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        #selected-category-title {
            font-size: 14px;
            color: #1e90ff;
            font-weight: 600;
        }
        #store-name {
            font-size: 22px;
            font-weight: bold;
        }
        #store-desc {
            font-size: 14px;
            line-height: 1.5;
            color: #555;
        }

        @media (max-width: 768px) {
            #map-container { flex-direction: column; }
            #info-panel {
                border-left: none;
                border-top: 2px solid #e1e4ea;
                height: 40vh;
            }
            #map { height: 60vh; }
        }
    </style>
</head>

<body>

<!-- ğŸ¨ ì¹´ë“œí˜• ì¹´í…Œê³ ë¦¬ ì„ íƒ í™”ë©´ -->
<div id="category-screen">
    <h1>ë§›ì§‘ ì¹´í…Œê³ ë¦¬ ì„ íƒ</h1>
    <p>ë³´ê³  ì‹¶ì€ ìŒì‹ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>

    <div class="card-grid">

        <button class="category-card" data-category="í•œì‹">
            <span class="emoji">ğŸš</span>
            <span class="title">í•œì‹</span>
            <span class="desc">êµ­ë°¥ Â· ì‚¼ê²¹ì‚´ Â· ì°Œê°œ</span>
        </button>

        <button class="category-card" data-category="ì¤‘ì‹">
            <span class="emoji">ğŸ¥¢</span>
            <span class="title">ì¤‘ì‹</span>
            <span class="desc">ì§œì¥ë©´ Â· ì§¬ë½• Â· íƒ•ìˆ˜ìœ¡</span>
        </button>

        <button class="category-card" data-category="ì¼ì‹">
            <span class="emoji">ğŸ£</span>
            <span class="title">ì¼ì‹</span>
            <span class="desc">ì´ˆë°¥ Â· ëˆì¹´ì¸  Â· ë¼ë©˜</span>
        </button>

        <button class="category-card" data-category="ì–‘ì‹">
            <span class="emoji">ğŸ</span>
            <span class="title">ì–‘ì‹</span>
            <span class="desc">íŒŒìŠ¤íƒ€ Â· ìŠ¤í…Œì´í¬</span>
        </button>

        <button class="category-card" data-category="ë¶„ì‹">
            <span class="emoji">ğŸ™</span>
            <span class="title">ë¶„ì‹</span>
            <span class="desc">ë–¡ë³¶ì´ Â· ê¹€ë°¥ Â· íŠ€ê¹€</span>
        </button>

        <button class="category-card" data-category="ì•„ì‹œì•ˆ">
            <span class="emoji">ğŸœ</span>
            <span class="title">ì•„ì‹œì•ˆ</span>
            <span class="desc">ìŒ€êµ­ìˆ˜ Â· íƒœêµ­ ìŒì‹</span>
        </button>

        <button class="category-card" data-category="íŒ¨ìŠ¤íŠ¸í‘¸ë“œ">
            <span class="emoji">ğŸ”</span>
            <span class="title">íŒ¨ìŠ¤íŠ¸í‘¸ë“œ</span>
            <span class="desc">ë²„ê±° Â· ì¹˜í‚¨</span>
        </button>

        <button class="category-card" data-category="ì¹´í˜">
            <span class="emoji">â˜•</span>
            <span class="title">ì¹´í˜</span>
            <span class="desc">ì»¤í”¼ Â· ë””ì €íŠ¸</span>
        </button>

    </div>
</div>

<!-- ğŸ—º ì§€ë„ í™”ë©´ -->
<div id="map-screen">
    <div id="map-container">
        <div id="map"></div>

        <div id="info-panel">
            <div id="selected-category-title">ì„ íƒí•œ ì¹´í…Œê³ ë¦¬: ì „ì²´</div>
            <div id="store-name">ë§›ì§‘ì„ ì„ íƒí•˜ì„¸ìš”</div>
            <div id="store-desc">ì§€ë„ì˜ ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ ë‚˜ì˜µë‹ˆë‹¤.</div>
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    let map;
    let mapInitialized = false;

    /* ê°€ê²Œ ë°ì´í„° */
    const restaurants = [
        {
            name: "ì¤‘ì•™ë™ íŒŒìŠ¤íƒ€ ë§›ì§‘",
            lat: 37.3165,
            lng: 126.8385,
            category: "ì–‘ì‹",
            desc: "ë¶„ìœ„ê¸° ì¢‹ì€ ë°ì´íŠ¸ ì½”ìŠ¤ë¡œ ì¶”ì²œí•˜ëŠ” íŒŒìŠ¤íƒ€ ì „ë¬¸ì ì…ë‹ˆë‹¤. <br>ì¶”ì²œ ë©”ë‰´: í¬ë¦¼ íŒŒìŠ¤íƒ€"
        },
        {
            name: "ê³ ì”ë™ ì‚¼ê²¹ì‚´",
            lat: 37.3105,
            lng: 126.8315,
            category: "í•œì‹",
            desc: "ìœ¡ì¦™ì´ ì‚´ì•„ìˆëŠ” ìˆ™ì„± ì‚¼ê²¹ì‚´ ë§›ì§‘ì…ë‹ˆë‹¤. <br>ë‹¨ì²´ íšŒì‹ ì¥ì†Œë¡œ ì¢‹ìŠµë‹ˆë‹¤."
        },
        {
            name: "ì—ë¦¬ì¹´ ì¹´í˜ê±°ë¦¬",
            lat: 37.2980,
            lng: 126.8360,
            category: "ì¹´í˜",
            desc: "í•œì–‘ëŒ€ ì—ë¦¬ì¹´ ê·¼ì²˜ì˜ ì¡°ìš©í•œ ê°ì„± ì¹´í˜ì…ë‹ˆë‹¤. <br>ì¹´ê³µí•˜ê¸° ì¢‹ì€ ê³³."
        },
        {
            name: "ì•ˆì‚°ì—­ ë‹¤ë¬¸í™” ìŒì‹ì ",
            lat: 37.3265,
            lng: 126.7890,
            category: "ì•„ì‹œì•ˆ",
            desc: "í˜„ì§€ì˜ ë§›ì„ ê·¸ëŒ€ë¡œ ëŠë‚„ ìˆ˜ ìˆëŠ” ìŒ€êµ­ìˆ˜ ì „ë¬¸ì ì…ë‹ˆë‹¤."
        }
    ];

    /* Leaflet ê¸°ë³¸ ë§ˆì»¤ */
    const defaultIcon = L.icon({
        iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });

    /* ğŸ”¥ ì§€ë„ ì´ˆê¸°í™” + ì•ˆì‚° ì˜ì—­ ì œí•œ */
    function initMap() {

        const ansanBounds = L.latLngBounds(
            [37.26, 126.75],  // ë‚¨ì„œìª½
            [37.37, 126.90]   // ë¶ë™ìª½
        );

        map = L.map('map', {
            center: [37.3219, 126.8309],
            zoom: 13,
            minZoom: 12,
            maxZoom: 18,
            maxBounds: ansanBounds,
            maxBoundsViscosity: 1.0
        });

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        restaurants.forEach(store => {
            const marker = L.marker([store.lat, store.lng], {icon: defaultIcon}).addTo(map);

            marker.bindPopup(`<b>${store.name}</b><br>${store.category}`);

            marker.on('click', () => {
                document.getElementById("store-name").innerText =
                    `${store.name} (${store.category})`;
                document.getElementById("store-desc").innerHTML = store.desc;
            });
        });
    }

    /* ğŸ”¥ ì¹´í…Œê³ ë¦¬ í´ë¦­ ì´ë²¤íŠ¸ */
    document.querySelectorAll(".category-card").forEach(card => {
        card.addEventListener("click", () => {
            const category = card.dataset.category;

            document.getElementById("category-screen").style.display = "none";
            document.getElementById("map-screen").style.display = "block";

            document.getElementById("selected-category-title").innerText =
                `ì„ íƒí•œ ì¹´í…Œê³ ë¦¬: ${category}`;

            if (!mapInitialized) {
                initMap();
                mapInitialized = true;
                setTimeout(() => map.invalidateSize(), 100);
            }
        });
    });
</script>

</body>
</html>
