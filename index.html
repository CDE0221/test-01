<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•ˆì‚° ë§›ì§‘ ì§€ë„</title>

    <!-- Leaflet CSS -->
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- í°íŠ¸ -->
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap"
        rel="stylesheet"
    />

    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            background: #f3f4f6;
            font-family: "Noto Sans KR", sans-serif;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì²« í™”ë©´ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        #category-screen {
            width: 100%;
            min-height: 100vh;
            padding-top: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #category-screen h1 {
            margin: 0;
            font-size: 32px;
            font-weight: 700;
            text-align: center;
        }

        #category-screen p {
            margin: 8px 0 30px;
            color: #6b7280;
            text-align: center;
            font-size: 15px;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(4, 220px);
            grid-auto-rows: 150px;
            gap: 24px;
            justify-content: center;
        }

        .category-card {
            background: #ffffff;
            border-radius: 20px;
            padding: 20px 18px;
            box-shadow: 0 18px 40px rgba(0,0,0,0.08);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: 0.15s ease;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.12);
        }

        .emoji { font-size: 30px; margin-bottom: 10px; }
        .title { font-size: 18px; font-weight: 700; }
        .desc { font-size: 13px; color: #6b7280; }


        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì§€ë„ í™”ë©´ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        #map-screen {
            display: none;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 30px;
        }

        #back-btn {
            background: #e5e7eb;
            border: none;
            padding: 8px 16px;
            border-radius: 999px;
            cursor: pointer;
            margin-bottom: 16px;
        }

        #map-container {
            display: flex;
            gap: 24px;
        }

        #map {
            flex: 4;
            height: 520px;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 18px 40px rgba(0,0,0,0.12);
        }

        #info-panel {
            flex: 3;
            min-height: 520px;
            background: white;
            border-radius: 18px;
            padding: 22px 26px;
            box-shadow: 0 18px 40px rgba(0,0,0,0.07);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #selected-category-title {
            font-size: 13px;
            font-weight: 700;
            color: #fb923c;
        }

        #store-name {
            font-size: 22px;
            font-weight: 700;
        }

        #store-desc,
        #store-phone,
        #store-hours {
            font-size: 15px;
            color: #4b5563;
            line-height: 1.5;
        }

        #reserve-btn {
            margin-top: 12px;
            padding: 10px 15px;
            border: none;
            border-radius: 999px;
            background: #fb923c;
            color: white;
            cursor: pointer;
            font-size: 14px;
            width: fit-content;
        }
    </style>
</head>




<body>

    <!-- â­ ì²« í™”ë©´ -->
    <div id="category-screen">
        <h1>ì•ˆì‚° ë§›ì§‘ ì§€ë„ ğŸ˜‹</h1>
        <p>ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ë©”ë‰´ë¥¼ ê³¨ë¼ë³´ì„¸ìš”.</p>

        <div class="card-grid">

            <div class="category-card" data-category="í•œì‹">
                <span class="emoji">ğŸš</span>
                <span class="title">í•œì‹</span>
                <span class="desc">ì§‘ë°¥ Â· ì°Œê°œ Â· ì‚¼ê²¹ì‚´</span>
            </div>

            <div class="category-card" data-category="ì–‘ì‹">
                <span class="emoji">ğŸ</span>
                <span class="title">ì–‘ì‹</span>
                <span class="desc">íŒŒìŠ¤íƒ€ Â· ìŠ¤í…Œì´í¬</span>
            </div>

            <div class="category-card" data-category="ì¤‘ì‹">
                <span class="emoji">ğŸ¥Ÿ</span>
                <span class="title">ì¤‘ì‹</span>
                <span class="desc">ì§œì¥ë©´ Â· ë”¤ì„¬</span>
            </div>

            <div class="category-card" data-category="ì¼ì‹">
                <span class="emoji">ğŸ£</span>
                <span class="title">ì¼ì‹</span>
                <span class="desc">ì´ˆë°¥ Â· ë¼ë©˜ Â· ëˆì¹´ì¸ </span>
            </div>

            <div class="category-card" data-category="ë¶„ì‹">
                <span class="emoji">ğŸ¢</span>
                <span class="title">ë¶„ì‹</span>
                <span class="desc">ë–¡ë³¶ì´ Â· ê¹€ë°¥</span>
            </div>

            <div class="category-card" data-category="ì¹´í˜">
                <span class="emoji">â˜•</span>
                <span class="title">ì¹´í˜</span>
                <span class="desc">ê°ì„± ì¹´í˜ Â· ë””ì €íŠ¸</span>
            </div>

            <div class="category-card" data-category="ì•„ì‹œì•ˆ">
                <span class="emoji">ğŸœ</span>
                <span class="title">ì•„ì‹œì•ˆ</span>
                <span class="desc">ìŒ€êµ­ìˆ˜ Â· ë§ˆë¼íƒ•</span>
            </div>

            <div class="category-card" data-category="ì „ì²´">
                <span class="emoji">ğŸ‘€</span>
                <span class="title">ì „ì²´ë³´ê¸°</span>
                <span class="desc">ëª¨ë“  ë§›ì§‘ ë³´ê¸°</span>
            </div>

        </div>
    </div>


    <!-- â­ ì§€ë„ í™”ë©´ -->
    <div id="map-screen">
        <button id="back-btn">â¬… ë‹¤ë¥¸ ë©”ë‰´ ê³ ë¥´ê¸°</button>

        <div id="map-container">
            <div id="map"></div>

            <div id="info-panel">
                <div id="selected-category-title">CATEGORY</div>
                <div id="store-name">ì‹ë‹¹ ì´ë¦„</div>
                <div id="store-desc">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê³  ë§ˆì»¤ë¥¼ ëˆ„ë¥´ë©´ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
                <div id="store-phone"></div>
                <div id="store-hours"></div>
                <button id="reserve-btn" style="display:none;">ì˜ˆì•½í•˜ê¸°</button>
            </div>
        </div>
    </div>



    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


    <script>
        const categoryScreen = document.getElementById("category-screen");
        const mapScreen = document.getElementById("map-screen");
        const backBtn = document.getElementById("back-btn");

        const selectedTitle = document.getElementById("selected-category-title");
        const storeNameEl = document.getElementById("store-name");
        const storeDescEl = document.getElementById("store-desc");
        const phoneEl = document.getElementById("store-phone");
        const hoursEl = document.getElementById("store-hours");
        const reserveBtn = document.getElementById("reserve-btn");

        /* â­ ì•ˆì‚° ì¤‘ì‹¬ & ë²”ìœ„ ì œí•œ */
        const ANSAN_CENTER = [37.3189, 126.8375];
        const ANSAN_ZOOM = 14;

        const map = L.map("map", {
            maxBounds: [
                [37.26, 126.78],
                [37.37, 126.89]
            ],
            maxBoundsViscosity: 1.0
        }).setView(ANSAN_CENTER, ANSAN_ZOOM);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            maxZoom: 18,
            minZoom: 12
        }).addTo(map);


        /* â­ ë§›ì§‘ ë°ì´í„° */
        const stores = [
            { name:"ì§„ì›ì†Œìš° ê³ ì”ì‹ ë„ì‹œì ", category:"í•œì‹", lat:37.3175, lng:126.8310, desc:"ì†Œê³ ê¸° Â· í•œì‹ ê³ ê¸° ì „ë¬¸ì ", phone:"0507-1388-2292", hours:"11:00~22:30", reserve:"" },
            { name:"ì¹´í˜ ë‚˜ë“œì˜¤í”„ - ììƒˆë‹¬", category:"ì¹´í˜", lat:37.3310, lng:126.8120, desc:"ê°ì„± ì¹´í˜", phone:"ì •ë³´ ì—†ìŒ", hours:"10:00~22:00", reserve:"" },
            { name:"ì—´ì´í‹€", category:"ì¹´í˜", lat:37.3340, lng:126.8150, desc:"ì¡°ìš©í•œ ì¹´í˜", phone:"ì •ë³´ ì—†ìŒ", hours:"10:00~22:00", reserve:"" },
            { name:"ë‹¹ë‹¹ì´ˆë°¥", category:"ì¼ì‹", lat:37.3150, lng:126.8380, desc:"ì´ˆë°¥ ì „ë¬¸ì ", phone:"0507-1312-5817", hours:"11:00~20:00", reserve:"" },
            { name:"íŒŒì•¤í”¼í•˜ìš°ìŠ¤", category:"ì–‘ì‹", lat:37.3230, lng:126.8270, desc:"íŒŒìŠ¤íƒ€ Â· í”¼ì", phone:"ì •ë³´ ì—†ìŒ", hours:"11:00~21:00", reserve:"" },
            { name:"ë§ˆë§ˆêµìê´€", category:"ì¤‘ì‹", lat:37.3190, lng:126.8240, desc:"êµì ì „ë¬¸ì ", phone:"031-491-2888", hours:"10:00~22:00", reserve:"" }
        ];

        /* â­ ë§ˆì»¤ ìƒì„± */
        const markers = stores.map(store => {
            const m = L.marker([store.lat, store.lng]).addTo(map);
            m.store = store;
            m.on("click", () => showStore(store));
            return m;
        });

        function showStore(store) {
            storeNameEl.textContent = store.name;
            storeDescEl.textContent = store.desc;
            phoneEl.textContent = "ì „í™”ë²ˆí˜¸: " + store.phone;
            hoursEl.textContent = "ì˜ì—…ì‹œê°„: " + store.hours;

            if (store.reserve) {
                reserveBtn.style.display = "inline-block";
                reserveBtn.onclick = () => window.open(store.reserve);
            } else {
                reserveBtn.style.display = "none";
                reserveBtn.onclick = null;
            }
        }

        /* â­ ì¹´í…Œê³ ë¦¬ í•„í„° */
        function filterMarkers(category) {
            const visible = markers.filter(m =>
                category === "ì „ì²´" || m.store.category === category
            );

            markers.forEach(m => {
                if (visible.includes(m)) {
                    if (!map.hasLayer(m)) m.addTo(map);
                } else {
                    if (map.hasLayer(m)) map.removeLayer(m);
                }
            });

            if (visible.length > 0) {
                const first = visible[0];
                map.setView(first.getLatLng(), 16);
                showStore(first.store);
            } else {
                map.setView(ANSAN_CENTER, ANSAN_ZOOM);
                storeNameEl.textContent = "ë“±ë¡ëœ ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤";
                storeDescEl.textContent = "ì´ ì¹´í…Œê³ ë¦¬ì— ë“±ë¡ëœ ë§›ì§‘ì´ ì•„ì§ ì—†ì–´ìš”.";
                phoneEl.textContent = "";
                hoursEl.textContent = "";
                reserveBtn.style.display = "none";
            }
        }

        /* â­ ì¹´í…Œê³ ë¦¬ í´ë¦­ â†’ ì§€ë„í™”ë©´ ì „í™˜ */
        document.querySelectorAll(".category-card").forEach(card => {
            card.addEventListener("click", () => {
                const cat = card.dataset.category;

                categoryScreen.style.display = "none";
                mapScreen.style.display = "block";

                selectedTitle.textContent =
                    (cat === "ì „ì²´") ? "ì „ì²´ ë§›ì§‘" : `${cat} ë§›ì§‘`;

                filterMarkers(cat);

                setTimeout(() => map.invalidateSize(), 200);
            });
        });

        backBtn.addEventListener("click", () => {
            mapScreen.style.display = "none";
            categoryScreen.style.display = "block";
            map.setView(ANSAN_CENTER, ANSAN_ZOOM);
        });
    </script>
</body>
</html>
